/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  v2506                                 |
|   \\  /    A nd           | Website:  www.openfoam.com                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      snappyHexMeshDict;
}

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * /


mergeTolerance 0.000001;

castellatedMesh true;

snap true;

addLayers false;

geometry
{

    atmosphere.stl
    {

        type triSurfaceMesh;

        name atmosphere;
    }

    defaultFaces.stl
    {

        type triSurfaceMesh;

        name defaultFaces;
    }

    gate.stl
    {

        type triSurfaceMesh;

        name gate;
    }

    inlet.stl
    {

        type triSurfaceMesh;

        name inlet;
    }

    lowerWall.stl
    {

        type triSurfaceMesh;

        name lowerWall;
    }

    outlet.stl
    {

        type triSurfaceMesh;

        name outlet;
    }
}

castellatedMeshControls
{
    locationInMesh (1 0.45 0.2);

    maxLocalCells 100000;

    maxGlobalCells 10000000;

    minRefinementCells 10;

    maxLoadUnbalance 0.1;

    nCellsBetweenLevels 4;

    resolveFeatureAngle 5;

    allowFreeStandingZoneFaces true;
    features
    (
        {

            file atmosphere.eMesh;

            level 0;
        }
        {

            file defaultFaces.eMesh;

            level 0;
        }
        {

            file gate.eMesh;

            level 0;
        }
        {

            file inlet.eMesh;

            level 0;
        }
        {

            file lowerWall.eMesh;

            level 0;
        }
        {

            file outlet.eMesh;

            level 0;
        }
    );

    refinementSurfaces
    {

        atmosphere
        {
            level (0 0);
        }

        defaultFaces
        {
            level (0 0);
        }

        gate
        {
            level (0 0);
        }

        inlet
        {
            level (0 0);
        }

        lowerWall
        {
            level (0 0);
        }

        outlet
        {
            level (0 0);
        }
    }

    refinementRegions
    {
    }
}

snapControls
{

    nSmoothPatch 3;

    nSolveIter 500;

    nRelaxIter 5;

    nFeatureSnapIter 10;

    tolerance 1;

    nFaceSplitInterval 5;

    implicitFeatureSnap false;

    explicitFeatureSnap true;

    multiRegionFeatureSnap true;
}

addLayersControls
{

    layers
    {
    }

    relativeSizes true;

    expansionRatio 1.25;

    firstLayerThickness 0.2;

    minThickness 0.1;

    nGrow 0;

    featureAngle 180;

    slipFeatureAngle 30;

    nRelaxIter 5;

    nSmoothSurfaceNormals 5;

    nSmoothNormals 3;

    nSmoothThickness 10;

    maxFaceThicknessRatio 0.5;

    maxThicknessToMedialRatio 0.5;

    minMedialAxisAngle 90;

    nBufferCellsNoExtrude 0;

    nLayerIter 50;
}

meshQualityControls
{

    maxNonOrtho 65;

    maxBoundarySkewness 20;

    maxInternalSkewness 4;

    maxConcave 80;

    minVol 1e-14;

    minTetQuality 1e-20;

    minArea -1;

    minTwist 0.02;

    minDeterminant 0.01;

    minFaceWeight 0.05;

    minVolRatio 0.01;

    minTriangleTwist -1;

    minVolCollapseRatio 0.1;

    minEdgeLength -1;

    nSmoothScale 4;

    errorReduction 0.75;
}


// ************************************************************************* //